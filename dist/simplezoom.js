!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Simplezoom=t():e.Simplezoom=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/Users/jorrittinholt/Projects/personal/simplezoom",t(t.s=0)}([function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){return{willChange:"transform",transition:"transform "+p.transitionDuration+"ms ease",zIndex:1e4}}function i(){return{position:"fixed",top:0,right:0,bottom:0,left:0,cursor:"zoom-out",opacity:0,backgroundColor:"#000",transition:"opacity "+p.transitionDuration+"ms ease",zIndex:9999}}function s(){var e=document.createElement("div");return Object.assign(e.style,i()),document.body.appendChild(e)}function l(){p.onOpen&&"function"==typeof p.onOpen&&p.onOpen()}function r(){p.onOpenComplete&&"function"==typeof p.onOpenComplete&&p.onOpenComplete()}function a(){p.onClose&&"function"==typeof p.onClose&&p.onClose()}function c(){p.onCloseComplete&&"function"==typeof p.onCloseComplete&&p.onCloseComplete()}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),p={padding:50,openDelay:0,closeDelay:0,transitionDuration:350,closeOnScroll:!0,closeOnEscape:!0},h="closed";e.exports=function(){function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,e),Object.assign(p,o),this.el=t,this.state=h,this.originalStyles={},this.open=this.open.bind(this),this.close=this.close.bind(this),this.toggle=this.toggle.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.el.addEventListener("click",this.toggle)}return u(e,[{key:"open",value:function(){var e=this;if(this.state!==h)return!1;this.state="opening",l(),setTimeout(function(){e.showOverlayElement(),e.saveOriginalStyles(),e.animateToFullScreen(),e.addEventListeners(),e.state="opened",r()},p.openDelay)}},{key:"close",value:function(){var e=this;if("opened"!==this.state)return!1;this.state="closing",a(),setTimeout(function(){e.hideOverlayElement(),e.animateToOriginalPosition(),e.state=h,c()},p.closeDelay),setTimeout(function(){e.cleanup()},p.closeDelay+p.transitionDuration)}},{key:"toggle",value:function(){this.state===h?this.open():"opened"===this.state&&this.close()}},{key:"onKeyUp",value:function(e){"Escape"!==e.key&&"Escape"!==e.code&&27!==e.keyCode||this.close()}},{key:"addEventListeners",value:function(){p.closeOnScroll&&window.addEventListener("scroll",this.close),p.closeOnEscape&&document.addEventListener("keyup",this.onKeyUp),this.overlay&&this.overlay.addEventListener("click",this.close)}},{key:"removeEventListeners",value:function(){p.closeOnScroll&&window.removeEventListener("scroll",this.close),p.closeOnEscape&&document.removeEventListener("keyup",this.onKeyUp),this.overlay&&this.overlay.removeEventListener("click",this.close)}},{key:"cleanup",value:function(){this.removeEventListeners(),this.overlay&&this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)}},{key:"saveOriginalStyles",value:function(){var e=window.getComputedStyle(this.el,null);this.originalStyles={position:e.getPropertyValue("position"),transform:e.getPropertyValue("transform")}}},{key:"animateToFullScreen",value:function(){var e=window.getComputedStyle(this.el,null).getPropertyValue("position"),t=this.calculateTranslateValues(),n=this.calculateZoomValue();"static"===e&&(e="relative"),Object.assign(this.el.style,o(),{position:e,transform:"translate("+t.X+"px, "+t.Y+"px) scale("+n+")"})}},{key:"animateToOriginalPosition",value:function(){var e=this;this.el.style.transform=this.originalStyles.transform,setTimeout(function(){e.el.removeAttribute("style")},p.closeDelay+p.transitionDuration)}},{key:"calculateTranslateValues",value:function(){var e=this.el.getBoundingClientRect(),t=e.left+e.width/2,n=e.top+e.height/2;return{X:window.innerWidth/2-t,Y:window.innerHeight/2-n}}},{key:"calculateZoomValue",value:function(){var e=this.el.getBoundingClientRect(),t=e.height,n=e.width,o=window.innerWidth-p.padding,i=window.innerHeight-p.padding;return t/n>i/o?i/t:o/n}},{key:"showOverlayElement",value:function(){this.overlay=s(),this.overlay.offsetWidth,this.overlay.style.opacity=.8}},{key:"hideOverlayElement",value:function(){var e=this;this.overlay.style.opacity=0,setTimeout(function(){e.overlay&&e.overlay.parentNode&&e.overlay.parentNode.removeChild(e.overlay)},p.closeDelay+p.transitionDuration)}}]),e}()}])});