!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Simplezoom=t():e.Simplezoom=t()}(this,function(){return function(e){function t(n){if(o[n])return o[n].exports;var i=o[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var o={};return t.m=e,t.c=o,t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/Users/jorrittinholt/Projects/personal/simplezoom",t(t.s=0)}([function(e,t){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),i={padding:50,openDelay:0,closeDelay:0,transitionDuration:350,closeOnScroll:!0,closeOnEscape:!0},s="closed";e.exports=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),this.options=Object.assign({},i,n),this.el=t,this.state=s,this.originalStyles={},this.open=this.open.bind(this),this.close=this.close.bind(this),this.toggle=this.toggle.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.el.addEventListener("click",this.toggle)}return n(e,[{key:"open",value:function(){if(this.state!==s)return!1;this.state="opening",this.onOpen()}},{key:"close",value:function(){if("opened"!==this.state)return!1;this.state="closing",this.onClose()}},{key:"toggle",value:function(){this.state===s?this.open():"opened"===this.state&&this.close()}},{key:"onOpen",value:function(){var e=this;setTimeout(function(){e.showOverlayElement(),e.saveOriginalStyles(),e.animateToFullScreen(),e.addEventListeners()},this.options.openDelay),setTimeout(function(){e.state="opened",e.onOpenComplete()},this.options.openDelay+this.options.transitionDuration),this.options.onOpen&&"function"==typeof this.options.onOpen&&this.options.onOpen()}},{key:"onOpenComplete",value:function(){this.options.onOpenComplete&&"function"==typeof this.options.onOpenComplete&&this.options.onOpenComplete()}},{key:"onClose",value:function(){var e=this;setTimeout(function(){e.hideOverlayElement(),e.animateToOriginalPosition()},this.options.closeDelay),setTimeout(function(){e.state=s,e.onCloseComplete()},this.options.closeDelay+ +this.options.transitionDuration),this.options.onClose&&"function"==typeof this.options.onClose&&this.options.onClose()}},{key:"onCloseComplete",value:function(){this.cleanup(),this.options.onCloseComplete&&"function"==typeof this.options.onCloseComplete&&this.options.onCloseComplete()}},{key:"onKeyUp",value:function(e){"Escape"!==e.key&&"Escape"!==e.code&&27!==e.keyCode||this.close()}},{key:"addEventListeners",value:function(){this.options.closeOnScroll&&window.addEventListener("scroll",this.close),this.options.closeOnEscape&&document.addEventListener("keyup",this.onKeyUp),this.overlay&&this.overlay.addEventListener("click",this.close)}},{key:"removeEventListeners",value:function(){this.options.closeOnScroll&&window.removeEventListener("scroll",this.close),this.options.closeOnEscape&&document.removeEventListener("keyup",this.onKeyUp),this.overlay&&this.overlay.removeEventListener("click",this.close)}},{key:"cleanup",value:function(){this.removeEventListeners(),this.overlay&&this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)}},{key:"saveOriginalStyles",value:function(){var e=window.getComputedStyle(this.el,null);this.originalStyles={position:e.getPropertyValue("position"),transform:e.getPropertyValue("transform")}}},{key:"animateToFullScreen",value:function(){var e=window.getComputedStyle(this.el,null).getPropertyValue("position"),t=this.calculateTranslateValues(),o=this.calculateZoomValue();"static"===e&&(e="relative"),Object.assign(this.el.style,this.getAdditionalTargetStyles(),{position:e,transform:"translate("+t.X+"px, "+t.Y+"px) scale("+o+")"})}},{key:"animateToOriginalPosition",value:function(){var e=this;this.el.style.transform=this.originalStyles.transform,setTimeout(function(){e.el.removeAttribute("style")},this.options.closeDelay+this.options.transitionDuration)}},{key:"calculateTranslateValues",value:function(){var e=this.el.getBoundingClientRect(),t=e.left+e.width/2,o=e.top+e.height/2;return{X:window.innerWidth/2-t,Y:window.innerHeight/2-o}}},{key:"calculateZoomValue",value:function(){var e=this.el.getBoundingClientRect(),t=e.height,o=e.width,n=window.innerWidth-this.options.padding,i=window.innerHeight-this.options.padding;return t/o>i/n?i/t:n/o}},{key:"createOverlayElement",value:function(){var e=document.createElement("div");return Object.assign(e.style,this.getOverlayStyles()),document.body.appendChild(e)}},{key:"showOverlayElement",value:function(){this.overlay=this.createOverlayElement(),this.overlay.offsetWidth,this.overlay.style.opacity=.8}},{key:"hideOverlayElement",value:function(){var e=this;this.overlay.style.opacity=0,setTimeout(function(){e.overlay&&e.overlay.parentNode&&e.overlay.parentNode.removeChild(e.overlay)},this.options.closeDelay+this.options.transitionDuration)}},{key:"getAdditionalTargetStyles",value:function(){return{willChange:"transform",transition:"transform "+this.options.transitionDuration+"ms ease",zIndex:1e4}}},{key:"getOverlayStyles",value:function(){return{position:"fixed",top:0,right:0,bottom:0,left:0,cursor:"zoom-out",opacity:0,backgroundColor:"#000",transition:"opacity "+this.options.transitionDuration+"ms ease",zIndex:9999}}}]),e}()}])});